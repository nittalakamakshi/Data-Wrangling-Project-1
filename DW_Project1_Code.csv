### Import refine_orginal and convert it into a local df,,,,,,,,
refine_original_df <- data.frame(refine_original),,,,,,,,
class(refine_original_df),,,,,,,,
,,,,,,,,
## Load tidyr & dplyr and implementing tbl,,,,,,,,
library(tidyr),,,,,,,,
library(dplyr),,,,,,,,
tbl_df(refine_original_df),,,,,,,,
      ,,,,,,,,
## Attach df ,,,,,,,,
,,,,,,,,
attach(refine_original_df),,,,,,,,
,,,,,,,,
### Clean up brand names,,,,,,,,
,,,,,,,,
tolower(company),,,,,,,,
,,,,,,,,
company_vector <- company,,,,,,,,
,,,,,,,,
"company_vector <- gsub(pattern = ""phillips|phlips"""," replacement = ""philips""", x = company_vector),,,,,,
"company_vector <- gsub(pattern = ""^a.*[0-9]$|^a.*\\szo$"""," replacement = ""akzo""", x = company_vector),,,,,,
"company_vector <- gsub(pattern = ""u.*r"""," replacement = ""unilever""", x = company_vector),,,,,,
,,,,,,,,
company <- company_vector,,,,,,,,
,,,,,,,,
refine_original_df,,,,,,,,
,,,,,,,,
### Detach refine_original_df,,,,,,,,
,,,,,,,,
detach(refine_original_df),,,,,,,,
,,,,,,,,
### Separate product code and number,,,,,,,,
,,,,,,,,
refine_original_df <-  separate(refine_original_df, Product.code...number," c(""product_code"""," ""product_number"")"," sep = ""-"")",,,,
,,,,,,,,
### Assign category,,,,,,,,
product_code_vector <- refine_original_df$product_code,,,,,,,,
,,,,,,,,
for (i in 1:length(product_code_vector)){,,,,,,,,
"  if(product_code_vector[i] == ""p""){",,,,,,,,
"    product_code_vector[i] = ""Smartphone""",,,,,,,,
"  } else if (product_code_vector[i] == ""x"") {",,,,,,,,
"    product_code_vector[i] = ""Laptop""",,,,,,,,
"  } else if (product_code_vector[i] == ""v"") {",,,,,,,,
"    product_code_vector[i] = ""TV""",,,,,,,,
"  } else if (product_code_vector[i] == ""q"") {",,,,,,,,
"    product_code_vector[i] = ""Tablet""",,,,,,,,
  },,,,,,,,
},,,,,,,,
,,,,,,,,
product_category <- product_code_vector,,,,,,,,
,,,,,,,,
product_category,,,,,,,,
,,,,,,,,
refine_original_df <- mutate(refine_original_df, product_category),,,,,,,
,,,,,,,,
### Add full address for geocoding,,,,,,,,
,,,,,,,,
refine_original_df <- unite(refine_original_df," ""full address""", address, city, country," sep = """,")

### Create dummy variable for company & product category

refine_original_df <- refine_original_df %>% mutate(company_philips = ifelse (company == philips""",1,0))
"refine_original_df <- refine_original_df %>% mutate(company_van_houten = ifelse(company == ""van houten""",1, 0)),,,,,,
"refine_original_df <- refine_original_df %>% mutate(company_unilever = ifelse(company == ""unilever""",1,0)),,,,,,
refine_original_df <- mutate(refine_original_df," company_akzo = ifelse(company == ""akzo""",1,0)),,,,,
,,,,,,,,
refine_original_df <- mutate(refine_original_df ," product_smartphone = ifelse(product_category == ""Smartphone""",1, 0)),,,,,
refine_original_df <- mutate(refine_original_df," product_laptop = ifelse(product_category == ""Laptop""",1,0)),,,,,
refine_original_df <- mutate(refine_original_df," product_tv = ifelse(product_category == ""TV""",1,0)),,,,,
refine_original_df <- mutate(refine_original_df," product_tablet = ifelse(product_category == ""Tablet""",1,0)),,,,,
,,,,,,,,
refine_original_df,,,,,,,,
